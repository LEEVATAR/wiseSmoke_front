{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { AuthSession } from \"expo\";\nimport axios from \"axios\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar NV_APP_ID = \"YOUR_CLIENT_ID\";\nvar NV_APP_SECRET = \"YOUR_CLIENT_PW\";\nvar STATE_STRING = \"YOUR_SECRET_STRING\";\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#fff\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  }\n});\nexport default function App() {\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    token = _useState2[0],\n    setToken = _useState2[1];\n  var _useState3 = useState(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    code = _useState4[0],\n    setCode = _useState4[1];\n  var _useState5 = useState(),\n    _useState6 = _slicedToArray(_useState5, 2),\n    user = _useState6[0],\n    setUser = _useState6[1];\n  function handlePressAsync() {\n    return _handlePressAsync.apply(this, arguments);\n  }\n  function _handlePressAsync() {\n    _handlePressAsync = _asyncToGenerator(function* () {\n      var redirectUrl = AuthSession.getRedirectUrl();\n      console.log(redirectUrl);\n      console.log(encodeURIComponent(redirectUrl));\n      var result = yield AuthSession.startAsync({\n        authUrl: \"https://nid.naver.com/oauth2.0/authorize?response_type=code&client_id=\" + NV_APP_ID + \"&redirect_uri=\" + encodeURIComponent(redirectUrl) + \"&state=\" + STATE_STRING\n      });\n      console.log(\"result\", result);\n      setCode(result.code);\n      handleGetAccess();\n    });\n    return _handlePressAsync.apply(this, arguments);\n  }\n  function handleGetAccess() {\n    return _handleGetAccess.apply(this, arguments);\n  }\n  function _handleGetAccess() {\n    _handleGetAccess = _asyncToGenerator(function* () {\n      var _yield$axios$get = yield axios.get(\"https://nid.naver.com/oauth2.0/token?grant_type=authorization_code&client_id=\" + NV_APP_ID + \" &client_secret=\" + NV_APP_SECRET + \" &code=\" + code + \"&state=\" + STATE_STRING),\n        access_token = _yield$axios$get.data.access_token;\n      var config = {\n        headers: {\n          Authorization: \"Bearer \" + access_token\n        }\n      };\n      setToken(data.access_token);\n      var _yield$axios$get2 = yield axios.get(\"https://openapi.naver.com/v1/nid/me\", config),\n        data = _yield$axios$get2.data;\n      console.log(data);\n      setUser(data);\n    });\n    return _handleGetAccess.apply(this, arguments);\n  }\n  return _jsx(View, {\n    style: styles.container,\n    children: _jsx(TouchableOpacity, {\n      onPress: handlePressAsync,\n      children: _jsx(Text, {\n        children: \"\\uB124\\uC774\\uBC84 \\uC544\\uC774\\uB514\\uB85C \\uC2DC\\uC791\\uD558\\uAE30\"\n      })\n    })\n  });\n}","map":{"version":3,"names":["React","useState","StyleSheet","Text","View","TouchableOpacity","AuthSession","axios","jsx","_jsx","NV_APP_ID","NV_APP_SECRET","STATE_STRING","styles","create","container","flex","backgroundColor","alignItems","justifyContent","App","_useState","_useState2","_slicedToArray","token","setToken","_useState3","_useState4","code","setCode","_useState5","_useState6","user","setUser","handlePressAsync","_handlePressAsync","apply","arguments","_asyncToGenerator","redirectUrl","getRedirectUrl","console","log","encodeURIComponent","result","startAsync","authUrl","handleGetAccess","_handleGetAccess","_yield$axios$get","get","access_token","data","config","headers","Authorization","_yield$axios$get2","style","children","onPress"],"sources":["/Users/sojaeyeon/Desktop/ToyProject/expo/wiseSmoke_front/src/login/NaverLogin.js"],"sourcesContent":["import React, { useState } from \"react\";  \nimport { StyleSheet, Text, View, TouchableOpacity } from \"react-native\";  \nimport { AuthSession } from \"expo\";  \nimport axios from \"axios\";\n\n//  \nconst NV_APP_ID = \"YOUR_CLIENT_ID\";  \nconst NV_APP_SECRET = \"YOUR_CLIENT_PW\";  \nconst STATE_STRING = \"YOUR_SECRET_STRING\";\n\nconst styles = StyleSheet.create({  \ncontainer: {  \nflex: 1,  \nbackgroundColor: \"#fff\",  \nalignItems: \"center\",  \njustifyContent: \"center\"  \n}  \n});\n\nexport default function App() {  \n//useState(), token/code/user  \nconst [token, setToken] = useState();  \nconst [code, setCode] = useState();  \nconst [user, setUser] = useState();\n\n\n//authsession\n\n\nasync function handlePressAsync() {  \nlet redirectUrl = AuthSession.getRedirectUrl();  \nconsole.log(redirectUrl);  \nconsole.log(encodeURIComponent(redirectUrl));\n\n\nconst result = await AuthSession.startAsync({\n  authUrl: `https://nid.naver.com/oauth2.0/authorize?response_type=code&client_id=${NV_APP_ID}&redirect_uri=${encodeURIComponent(\n    redirectUrl\n  )}&state=${STATE_STRING}`\n});\n\nconsole.log(\"result\", result);\n\nsetCode(result.code);\n\nhandleGetAccess();\n\n\n}\n\n\n//http data request\n\n\nasync function handleGetAccess() {  \nconst {  \ndata: { access_token }  \n} = await axios.get(`https://nid.naver.com/oauth2.0/token?grant_type=authorization_code&client_id=${NV_APP_ID} &client_secret=${NV_APP_SECRET} &code=${code}&state=${STATE_STRING}`);\n\n\nconst config = {\n  headers: {\n    Authorization: `Bearer ${access_token}`\n  }\n};\n\nsetToken(data.access_token);\n\nconst { data } = await axios.get(\n  \"https://openapi.naver.com/v1/nid/me\",\n  config\n);\nconsole.log(data);\nsetUser(data);\n\n\n}\n\n//TEXT press -> handlePressAsync()  \nreturn (\n    <View style={styles.container}>\n      <TouchableOpacity onPress={handlePressAsync}>\n        <Text>네이버 아이디로 시작하기</Text>\n      </TouchableOpacity>\n    </View>\n  );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}