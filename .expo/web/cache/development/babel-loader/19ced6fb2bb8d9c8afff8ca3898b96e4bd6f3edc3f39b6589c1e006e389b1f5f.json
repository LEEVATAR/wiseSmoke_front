{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { AuthSession } from \"expo\";\nimport axios from \"axios\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar NV_APP_ID = \"i90dwXdfWfTQaPy11Qqq\";\nvar NV_APP_SECRET = \"dxyna27e4T\";\nvar STATE_STRING = \"wiseSmoke\";\nfunction NaverLogin() {\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    token = _useState2[0],\n    setToken = _useState2[1];\n  var _useState3 = useState(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    code = _useState4[0],\n    setCode = _useState4[1];\n  var _useState5 = useState(),\n    _useState6 = _slicedToArray(_useState5, 2),\n    user = _useState6[0],\n    setUser = _useState6[1];\n  function handlePressAsync() {\n    return _handlePressAsync.apply(this, arguments);\n  }\n  function _handlePressAsync() {\n    _handlePressAsync = _asyncToGenerator(function* () {\n      var redirectUrl = AuthSession.getRedirectUrl();\n      console.log(redirectUrl);\n      console.log(encodeURIComponent(redirectUrl));\n      var result = yield AuthSession.startAsync({\n        authUrl: \"https://nid.naver.com/oauth2.0/authorize?response_type=code&client_id=\" + NV_APP_ID + \"&redirect_uri=\" + encodeURIComponent(redirectUrl) + \"&state=\" + STATE_STRING\n      });\n      console.log(\"result\", result);\n      setCode(result.code);\n    });\n    return _handlePressAsync.apply(this, arguments);\n  }\n  return _jsx(View, {\n    style: Styles.container,\n    children: _jsx(WebView, {\n      style: {\n        flex: 1\n      },\n      originWhitelist: ['*'],\n      scalesPageToFit: false,\n      source: {\n        uri: \"https://kauth.kakao.com/oauth/authorize?response_type=code&client_id=\" + REST_API_KEY + \"&redirect_uri=\" + REDIRECT_URI\n      },\n      injectedJavaScript: INJECTED_JAVASCRIPT,\n      javaScriptEnabled: true,\n      onMessage: function onMessage(event) {\n        KakaoLoginWebView(event.nativeEvent[\"url\"]);\n      }\n    })\n  });\n}\nexport default NaverLogin;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#fff\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  }\n});","map":{"version":3,"names":["React","useState","StyleSheet","Text","View","TouchableOpacity","AuthSession","axios","jsx","_jsx","NV_APP_ID","NV_APP_SECRET","STATE_STRING","NaverLogin","_useState","_useState2","_slicedToArray","token","setToken","_useState3","_useState4","code","setCode","_useState5","_useState6","user","setUser","handlePressAsync","_handlePressAsync","apply","arguments","_asyncToGenerator","redirectUrl","getRedirectUrl","console","log","encodeURIComponent","result","startAsync","authUrl","style","Styles","container","children","WebView","flex","originWhitelist","scalesPageToFit","source","uri","REST_API_KEY","REDIRECT_URI","injectedJavaScript","INJECTED_JAVASCRIPT","javaScriptEnabled","onMessage","event","KakaoLoginWebView","nativeEvent","styles","create","backgroundColor","alignItems","justifyContent"],"sources":["/Users/sojaeyeon/Desktop/ToyProject/expo/wiseSmoke_front/src/login/NaverLogin.js"],"sourcesContent":["import React, { useState } from \"react\";  \nimport { StyleSheet, Text, View, TouchableOpacity } from \"react-native\";  \nimport { AuthSession } from \"expo\"; \nimport axios from \"axios\";\n\nconst NV_APP_ID = \"i90dwXdfWfTQaPy11Qqq\";  \nconst NV_APP_SECRET = \"dxyna27e4T\";  \nconst STATE_STRING = \"wiseSmoke\";\n\nfunction NaverLogin() {  \n//useState(), token/code/user  \nconst [token, setToken] = useState();  \nconst [code, setCode] = useState();  \nconst [user, setUser] = useState();\n\n//authsession\nasync function handlePressAsync() {  \n  let redirectUrl = AuthSession.getRedirectUrl();  \n  console.log(redirectUrl);  \n  console.log(encodeURIComponent(redirectUrl));\n\n  const result = await AuthSession.startAsync({\n    authUrl: `https://nid.naver.com/oauth2.0/authorize?response_type=code&client_id=${NV_APP_ID}&redirect_uri=${encodeURIComponent(\n      redirectUrl\n    )}&state=${STATE_STRING}`\n  });\n\n  console.log(\"result\", result);\n  setCode(result.code);\n\n  // handleGetAccess();\n}\n\n\n// async function handleGetAccess() {  \n// const {  \n// data: { access_token }  \n// } = await axios.get(`https://nid.naver.com/oauth2.0/token?grant_type=authorization_code&client_id=${NV_APP_ID} &client_secret=${NV_APP_SECRET} &code=${code}&state=${STATE_STRING}`);\n\n\n// const config = {\n//   headers: {\n//     Authorization: `Bearer ${access_token}`\n//   }\n// };\n\n// setToken(data.access_token);\n\n// const { data } = await axios.get(\n//   \"https://openapi.naver.com/v1/nid/me\",\n//   config\n// );\n// console.log(data);\n// setUser(data);\n// }\n\n  return (\n    <View style={Styles.container}>      \n      <WebView\n        style={{ flex: 1 }}\n        originWhitelist={['*']}\n        scalesPageToFit={false}\n        source={{\n          uri: `https://kauth.kakao.com/oauth/authorize?response_type=code&client_id=${REST_API_KEY}&redirect_uri=${REDIRECT_URI}`,\n        }}\n        injectedJavaScript={INJECTED_JAVASCRIPT}\n        javaScriptEnabled\n        onMessage={event => { KakaoLoginWebView(event.nativeEvent[\"url\"]); }}\n      />\n    </View>\n  );\n\n}\n\nexport default NaverLogin;\n\nconst styles = StyleSheet.create({  \n  container: {  \n  flex: 1,  \n  backgroundColor: \"#fff\",  \n  alignItems: \"center\",  \n  justifyContent: \"center\"  \n  }  \n});"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AAAC,OAAAC,UAAA;AAAA,OAAAC,IAAA;AAAA,OAAAC,IAAA;AAAA,OAAAC,gBAAA;AAExC,SAASC,WAAW,QAAQ,MAAM;AAClC,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAE1B,IAAMC,SAAS,GAAG,sBAAsB;AACxC,IAAMC,aAAa,GAAG,YAAY;AAClC,IAAMC,YAAY,GAAG,WAAW;AAEhC,SAASC,UAAUA,CAAA,EAAG;EAEtB,IAAAC,SAAA,GAA0Bb,QAAQ,CAAC,CAAC;IAAAc,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA7BG,KAAK,GAAAF,UAAA;IAAEG,QAAQ,GAAAH,UAAA;EACtB,IAAAI,UAAA,GAAwBlB,QAAQ,CAAC,CAAC;IAAAmB,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAA3BE,IAAI,GAAAD,UAAA;IAAEE,OAAO,GAAAF,UAAA;EACpB,IAAAG,UAAA,GAAwBtB,QAAQ,CAAC,CAAC;IAAAuB,UAAA,GAAAR,cAAA,CAAAO,UAAA;IAA3BE,IAAI,GAAAD,UAAA;IAAEE,OAAO,GAAAF,UAAA;EAAe,SAGpBG,gBAAgBA,CAAA;IAAA,OAAAC,iBAAA,CAAAC,KAAA,OAAAC,SAAA;EAAA;EAAA,SAAAF,kBAAA;IAAAA,iBAAA,GAAAG,iBAAA,CAA/B,aAAkC;MAChC,IAAIC,WAAW,GAAG1B,WAAW,CAAC2B,cAAc,CAAC,CAAC;MAC9CC,OAAO,CAACC,GAAG,CAACH,WAAW,CAAC;MACxBE,OAAO,CAACC,GAAG,CAACC,kBAAkB,CAACJ,WAAW,CAAC,CAAC;MAE5C,IAAMK,MAAM,SAAS/B,WAAW,CAACgC,UAAU,CAAC;QAC1CC,OAAO,6EAA2E7B,SAAS,sBAAiB0B,kBAAkB,CAC5HJ,WACF,CAAC,eAAUpB;MACb,CAAC,CAAC;MAEFsB,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEE,MAAM,CAAC;MAC7Bf,OAAO,CAACe,MAAM,CAAChB,IAAI,CAAC;IAGtB,CAAC;IAAA,OAAAO,iBAAA,CAAAC,KAAA,OAAAC,SAAA;EAAA;EAyBC,OACErB,IAAA,CAACL,IAAI;IAACoC,KAAK,EAAEC,MAAM,CAACC,SAAU;IAAAC,QAAA,EAC5BlC,IAAA,CAACmC,OAAO;MACNJ,KAAK,EAAE;QAAEK,IAAI,EAAE;MAAE,CAAE;MACnBC,eAAe,EAAE,CAAC,GAAG,CAAE;MACvBC,eAAe,EAAE,KAAM;MACvBC,MAAM,EAAE;QACNC,GAAG,4EAA0EC,YAAY,sBAAiBC;MAC5G,CAAE;MACFC,kBAAkB,EAAEC,mBAAoB;MACxCC,iBAAiB;MACjBC,SAAS,EAAE,SAAAA,UAAAC,KAAK,EAAI;QAAEC,iBAAiB,CAACD,KAAK,CAACE,WAAW,CAAC,KAAK,CAAC,CAAC;MAAE;IAAE,CACtE;EAAC,CACE,CAAC;AAGX;AAEA,eAAe7C,UAAU;AAEzB,IAAM8C,MAAM,GAAGzD,UAAU,CAAC0D,MAAM,CAAC;EAC/BlB,SAAS,EAAE;IACXG,IAAI,EAAE,CAAC;IACPgB,eAAe,EAAE,MAAM;IACvBC,UAAU,EAAE,QAAQ;IACpBC,cAAc,EAAE;EAChB;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}